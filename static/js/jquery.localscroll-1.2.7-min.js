(function(a){var d=location.href.replace(/#.*/,"");var b=a.localScroll=function(e){a("body").localScroll(e)};b.defaults={duration:1000,axis:"y",event:"click",stop:true,target:window,reset:true};b.hash=function(f){if(location.hash){f=a.extend({},b.defaults,f);f.hash=false;if(f.reset){var g=f.duration;delete f.duration;a(f.target).scrollTo(0,f);f.duration=g}c(0,location,f)}};a.fn.localScroll=function(e){e=a.extend({},b.defaults,e);return e.lazy?this.bind(e.event,function(g){var h=a([g.target,g.target.parentNode]).filter(f)[0];if(h){c(g,h,e)}}):this.find("a,area").filter(f).bind(e.event,function(g){c(g,this,e)}).end().end();function f(){return !!this.href&&!!this.hash&&this.href.replace(this.hash,"")==d&&(!e.filter||a(this).is(e.filter))}};function c(g,m,i){var l=m.hash.slice(1),n=document.getElementById(l)||document.getElementsByName(l)[0];if(!n){return}if(g){g.preventDefault()}var o=a(i.target);if(i.lock&&o.is(":animated")||i.onBefore&&i.onBefore.call(i,g,n,o)===false){return}if(i.stop){o.stop(true)}if(i.hash){var p=n.id==l?"id":"name",q=a("<a> </a>").attr(p,l).css({position:"absolute",top:a(window).scrollTop(),left:a(window).scrollLeft()});n[p]="";a("body").prepend(q);location=m.hash;q.remove();n[p]=l}o.scrollTo(n,i).trigger("notify.serialScroll",[n])}})(jQuery);